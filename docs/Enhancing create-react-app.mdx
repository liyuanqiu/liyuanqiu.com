---
name: ğŸ‘‰ Enhancing create-react-app
menu: docs
route: /docs/enhancing-create-react-app
---

# Enhancing `create-react-app`

## Step 1

```bash
yarn create react-app your-project --typescript
```

## Step 2

```bash
#!/bin/sh

# å®‰è£… airbnb çš„ eslint è§„åˆ™åŒ…
npx install-peerdeps --dev eslint-config-airbnb

# å®‰è£…å¼€å‘ä¾èµ–
yarn add -D \
  customize-cra react-app-rewired \
  prettier eslint-config-prettier eslint-plugin-prettier \
  eslint-config-react-app \
  @typescript-eslint/eslint-plugin @typescript-eslint/parser \
  eslint-plugin-flowtype@3.x babel-eslint \
  less less-loader \
  webpack-bundle-analyzer \
  babel-plugin-import

# å°†ä¸€äº›ä¾èµ–è¿ç§»åˆ° devDependencies
yarn remove react-scripts @types/jest @types/node @types/react @types/react-dom typescript
yarn add -D react-scripts @types/jest @types/node @types/react @types/react-dom typescript

# å°† scripts ä¸­çš„ react-scripts æ›¿æ¢ä¸º react-app-rewired
sed -i '' -e 's/"react-scripts /"react-app-rewired /g' package.json

# å†™å…¥ config-overrides.js
cat > config-overrides.js <<EOF
const {
  override,
  useEslintRc,
  addBundleVisualizer,
  addLessLoader,
  fixBabelImports,
} = require('customize-cra');

const modifyVars = require('./src/custom-less-vars');

module.exports = override(
  useEslintRc('.eslintrc.js'),
  fixBabelImports({
    libraryName: 'antd',
    style: true,
  }),
  addLessLoader({
    javascriptEnabled: true,
    modifyVars,
  }),
  process.env.NODE_ENV === 'production' &&
    addBundleVisualizer({
      analyzerMode: 'static',
    }),
);
EOF

# å†™å…¥ src/custom-less-vars.js
cat > src/custom-less-vars.js <<EOF
module.exports = {};
EOF

# å†™å…¥ .eslintrc.js
cat > .eslintrc.js <<EOF
module.exports = {
  parser: '@typescript-eslint/parser',
  extends: [
    'plugin:@typescript-eslint/recommended',
    'react-app',
    'airbnb',
    'plugin:prettier/recommended',
  ],
  rules: {
    'react/jsx-filename-extension': [
      1,
      {
        extensions: ['.tsx', '.jsx'],
      },
    ],
    'import/prefer-default-export': 'off',
    '@typescript-eslint/explicit-function-return-type': 'off',
    'react/jsx-one-expression-per-line': 'off',
  },
  settings: {
    'import/resolver': {
      node: {
        extensions: ['.js', '.jsx', '.ts', '.tsx', '.json'],
      },
    },
  },
  env: {
    jest: true,
    browser: true,
  },
};
EOF

# å†™å…¥ .eslintignore
cat > .eslintignore <<EOF
src/serviceWorker.ts
src/react-app-env.d.ts
EOF

# å†™å…¥ .prettierrc.js
cat > .prettierrc.js <<EOF
module.exports = {
  printWidth: 80,
  semi: true,
  singleQuote: true,
  trailingComma: 'all',
};
EOF

# ä¿®å¤æ‰€æœ‰å¯ä¿®å¤çš„ eslint é—®é¢˜
yarn eslint -c .eslintrc.js --ignore-path .eslintignore --ext jsx --ext js --ext tsx --ext ts --fix src

echo "è¯·æ‰‹åŠ¨åˆ é™¤ package.json ä¸­çš„ eslintConfig å­—æ®µï¼"
echo
echo
```
